d1acdf3787272bbbe0628ac0c54fa623
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Executor_1 = __importDefault(require("../../../core/infrastructure/Executor"));
class InMemoryQueryBus {
    constructor(queryHandlersMapper, executors = []) {
        this.queryHandlersMapper = queryHandlersMapper;
        this.executor = new Executor_1.default(executors);
    }
    ask(query) {
        return this.executor.run(query, () => {
            const handler = this.queryHandlersMapper.search(query);
            return handler.handle(query);
        });
    }
}
exports.default = InMemoryQueryBus;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2N1YXRyb29jaGVudGEvTWFnaWNTaG9wcGVyL21hZ2ljc2hvcHBlci1ub2RlL3NyYy9taWNyb2svY3Fycy9pbmZyYXN0cnVjdHVyZS9xdWVyeS9Jbk1lbW9yeVF1ZXJ5QnVzLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBRUEscUZBQTZEO0FBTTdELE1BQXFCLGdCQUFnQjtJQUdqQyxZQUNxQixtQkFBc0UsRUFDdkYsWUFBcUQsRUFBRTtRQUR0Qyx3QkFBbUIsR0FBbkIsbUJBQW1CLENBQW1EO1FBR3ZGLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxrQkFBUSxDQUF1QixTQUFTLENBQUMsQ0FBQztJQUNsRSxDQUFDO0lBRUQsR0FBRyxDQUEwQixLQUFZO1FBQ3JDLE9BQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsS0FBSyxFQUFFLEdBQUcsRUFBRTtZQUNqQyxNQUFNLE9BQU8sR0FBRyxJQUFJLENBQUMsbUJBQW1CLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQ3ZELE9BQU8sT0FBTyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNqQyxDQUFDLENBQWUsQ0FBQztJQUNyQixDQUFDO0NBQ0o7QUFoQkQsbUNBZ0JDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy9jdWF0cm9vY2hlbnRhL01hZ2ljU2hvcHBlci9tYWdpY3Nob3BwZXItbm9kZS9zcmMvbWljcm9rL2NxcnMvaW5mcmFzdHJ1Y3R1cmUvcXVlcnkvSW5NZW1vcnlRdWVyeUJ1cy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBNYXBwZXIgfSBmcm9tICcuLi8uLi8uLi9jb21tb24vTWFwcGVyJztcbmltcG9ydCBXcmFwcGVyRXhlY3V0b3IgZnJvbSAnLi4vLi4vLi4vY29yZS9kb21haW4vV3JhcHBlckV4ZWN1dG9yJztcbmltcG9ydCBFeGVjdXRvciBmcm9tICcuLi8uLi8uLi9jb3JlL2luZnJhc3RydWN0dXJlL0V4ZWN1dG9yJztcbmltcG9ydCBRdWVyeSBmcm9tICcuLi8uLi9kb21haW4vcXVlcnkvUXVlcnknO1xuaW1wb3J0IFF1ZXJ5QnVzIGZyb20gJy4uLy4uL2RvbWFpbi9xdWVyeS9RdWVyeUJ1cyc7XG5pbXBvcnQgeyBRdWVyeUhhbmRsZXIgfSBmcm9tICcuLi8uLi9kb21haW4vcXVlcnkvUXVlcnlIYW5kbGVyJztcbmltcG9ydCB7IFF1ZXJ5UmVzcG9uc2UgfSBmcm9tICcuLi8uLi9kb21haW4vcXVlcnkvUXVlcnlSZXNwb25zZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEluTWVtb3J5UXVlcnlCdXMgaW1wbGVtZW50cyBRdWVyeUJ1cyB7XG4gICAgcHJpdmF0ZSByZWFkb25seSBleGVjdXRvcjogRXhlY3V0b3I8UXVlcnksIFF1ZXJ5UmVzcG9uc2U+O1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgcXVlcnlIYW5kbGVyc01hcHBlcjogTWFwcGVyPFF1ZXJ5LCBRdWVyeUhhbmRsZXI8UXVlcnksIFF1ZXJ5UmVzcG9uc2U+PixcbiAgICAgICAgZXhlY3V0b3JzOiBXcmFwcGVyRXhlY3V0b3I8UXVlcnksIFF1ZXJ5UmVzcG9uc2U+W10gPSBbXSxcbiAgICApIHtcbiAgICAgICAgdGhpcy5leGVjdXRvciA9IG5ldyBFeGVjdXRvcjxRdWVyeSwgUXVlcnlSZXNwb25zZT4oZXhlY3V0b3JzKTtcbiAgICB9XG5cbiAgICBhc2s8UiBleHRlbmRzIFF1ZXJ5UmVzcG9uc2U+KHF1ZXJ5OiBRdWVyeSk6IFByb21pc2U8Uj4ge1xuICAgICAgICByZXR1cm4gdGhpcy5leGVjdXRvci5ydW4ocXVlcnksICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGhhbmRsZXIgPSB0aGlzLnF1ZXJ5SGFuZGxlcnNNYXBwZXIuc2VhcmNoKHF1ZXJ5KTtcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVyLmhhbmRsZShxdWVyeSk7XG4gICAgICAgIH0pIGFzIFByb21pc2U8Uj47XG4gICAgfVxufVxuIl0sInZlcnNpb24iOjN9