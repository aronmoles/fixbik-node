2093ee44566a73ac4084a2ce5c55f1ff
"use strict";
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const AuthUserSearchByEmail_1 = __importDefault(require("../search-by-email/AuthUserSearchByEmail"));
class LoginService {
    constructor(authUserRepository, authTokenRepository) {
        this.authTokenRepository = authTokenRepository;
        this.authUserSearcherByEmail = new AuthUserSearchByEmail_1.default(authUserRepository);
    }
    run(email, password) {
        return __awaiter(this, void 0, void 0, function* () {
            const authUser = yield this.authUserSearcherByEmail.search(email);
            authUser.isValidPassword(password);
            return this.authTokenRepository.generate(authUser);
        });
    }
}
exports.default = LoginService;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2N1YXRyb29jaGVudGEvTWFnaWNTaG9wcGVyL21hZ2ljc2hvcHBlci1ub2RlL3NyYy9tb2R1bGVzL2F1dGgvYXBwbGljYXRpb24vbG9naW4vTG9naW5TZXJ2aWNlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBS0EscUdBQTZFO0FBRTdFLE1BQXFCLFlBQVk7SUFFN0IsWUFDSSxrQkFBc0MsRUFDckIsbUJBQXdDO1FBQXhDLHdCQUFtQixHQUFuQixtQkFBbUIsQ0FBcUI7UUFFekQsSUFBSSxDQUFDLHVCQUF1QixHQUFHLElBQUksK0JBQXFCLENBQUMsa0JBQWtCLENBQUMsQ0FBQztJQUNqRixDQUFDO0lBRUssR0FBRyxDQUFDLEtBQW9CLEVBQUUsUUFBMEI7O1lBQ3RELE1BQU0sUUFBUSxHQUFHLE1BQU0sSUFBSSxDQUFDLHVCQUF1QixDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUVsRSxRQUFRLENBQUMsZUFBZSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBRW5DLE9BQU8sSUFBSSxDQUFDLG1CQUFtQixDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUN2RCxDQUFDO0tBQUE7Q0FDSjtBQWhCRCwrQkFnQkMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL2N1YXRyb29jaGVudGEvTWFnaWNTaG9wcGVyL21hZ2ljc2hvcHBlci1ub2RlL3NyYy9tb2R1bGVzL2F1dGgvYXBwbGljYXRpb24vbG9naW4vTG9naW5TZXJ2aWNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBBdXRoVG9rZW4gZnJvbSAnLi4vLi4vZG9tYWluL0F1dGhUb2tlbic7XG5pbXBvcnQgQXV0aFRva2VuUmVwb3NpdG9yeSBmcm9tICcuLi8uLi9kb21haW4vQXV0aFRva2VuUmVwb3NpdG9yeSc7XG5pbXBvcnQgQXV0aFVzZXJFbWFpbCBmcm9tICcuLi8uLi9kb21haW4vQXV0aFVzZXJFbWFpbCc7XG5pbXBvcnQgQXV0aFVzZXJQYXNzd29yZCBmcm9tICcuLi8uLi9kb21haW4vQXV0aFVzZXJQYXNzd29yZCc7XG5pbXBvcnQgeyBBdXRoVXNlclJlcG9zaXRvcnkgfSBmcm9tICcuLi8uLi9kb21haW4vQXV0aFVzZXJSZXBvc2l0b3J5JztcbmltcG9ydCBBdXRoVXNlclNlYXJjaEJ5RW1haWwgZnJvbSAnLi4vc2VhcmNoLWJ5LWVtYWlsL0F1dGhVc2VyU2VhcmNoQnlFbWFpbCc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIExvZ2luU2VydmljZSB7XG4gICAgcHJpdmF0ZSByZWFkb25seSBhdXRoVXNlclNlYXJjaGVyQnlFbWFpbDogQXV0aFVzZXJTZWFyY2hCeUVtYWlsO1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBhdXRoVXNlclJlcG9zaXRvcnk6IEF1dGhVc2VyUmVwb3NpdG9yeSxcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBhdXRoVG9rZW5SZXBvc2l0b3J5OiBBdXRoVG9rZW5SZXBvc2l0b3J5LFxuICAgICkge1xuICAgICAgICB0aGlzLmF1dGhVc2VyU2VhcmNoZXJCeUVtYWlsID0gbmV3IEF1dGhVc2VyU2VhcmNoQnlFbWFpbChhdXRoVXNlclJlcG9zaXRvcnkpO1xuICAgIH1cblxuICAgIGFzeW5jIHJ1bihlbWFpbDogQXV0aFVzZXJFbWFpbCwgcGFzc3dvcmQ6IEF1dGhVc2VyUGFzc3dvcmQpOiBQcm9taXNlPEF1dGhUb2tlbj4ge1xuICAgICAgICBjb25zdCBhdXRoVXNlciA9IGF3YWl0IHRoaXMuYXV0aFVzZXJTZWFyY2hlckJ5RW1haWwuc2VhcmNoKGVtYWlsKTtcblxuICAgICAgICBhdXRoVXNlci5pc1ZhbGlkUGFzc3dvcmQocGFzc3dvcmQpO1xuXG4gICAgICAgIHJldHVybiB0aGlzLmF1dGhUb2tlblJlcG9zaXRvcnkuZ2VuZXJhdGUoYXV0aFVzZXIpO1xuICAgIH1cbn1cbiJdLCJ2ZXJzaW9uIjozfQ==