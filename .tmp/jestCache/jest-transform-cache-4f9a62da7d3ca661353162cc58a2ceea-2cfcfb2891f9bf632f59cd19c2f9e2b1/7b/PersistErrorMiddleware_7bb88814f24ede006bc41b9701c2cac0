4120a56ce7626b5fd1a7ad19f4fe7a31
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const TrackError_1 = require("../../domain/error/TrackError");
class PersistErrorMiddleware {
    constructor(errorTracker) {
        this.errorTracker = errorTracker;
    }
    apply(error, req, res, next) {
        if (this.errorTracker) {
            this.errorTracker.track(TrackError_1.TrackError.fromError(error));
        }
        next(error);
    }
}
exports.default = PersistErrorMiddleware;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2N1YXRyb29jaGVudGEvTWFnaWNTaG9wcGVyL21hZ2ljc2hvcHBlci1ub2RlL3NyYy9taWNyb2svY29yZS9pbmZyYXN0cnVjdHVyZS9lcnJvci9QZXJzaXN0RXJyb3JNaWRkbGV3YXJlLnRzIiwibWFwcGluZ3MiOiI7O0FBQ0EsOERBQTJEO0FBSzNELE1BQXFCLHNCQUFzQjtJQUN2QyxZQUNxQixZQUEwQjtRQUExQixpQkFBWSxHQUFaLFlBQVksQ0FBYztJQUM1QyxDQUFDO0lBRUosS0FBSyxDQUFDLEtBQVksRUFBRSxHQUFZLEVBQUUsR0FBYSxFQUFFLElBQXlCO1FBQ3RFLElBQUksSUFBSSxDQUFDLFlBQVksRUFBRTtZQUNuQixJQUFJLENBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQyx1QkFBVSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO1NBQ3hEO1FBQ0QsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ2hCLENBQUM7Q0FDSjtBQVhELHlDQVdDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy9jdWF0cm9vY2hlbnRhL01hZ2ljU2hvcHBlci9tYWdpY3Nob3BwZXItbm9kZS9zcmMvbWljcm9rL2NvcmUvaW5mcmFzdHJ1Y3R1cmUvZXJyb3IvUGVyc2lzdEVycm9yTWlkZGxld2FyZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgRXJyb3JUcmFja2VyIGZyb20gJy4uLy4uL2RvbWFpbi9lcnJvci9FcnJvclRyYWNrZXInO1xuaW1wb3J0IHsgVHJhY2tFcnJvciB9IGZyb20gJy4uLy4uL2RvbWFpbi9lcnJvci9UcmFja0Vycm9yJztcbmltcG9ydCB7IEVycm9yTWlkZGxld2FyZSwgRXJyb3JNaWRkbGV3YXJlTmV4dCB9IGZyb20gJy4uLy4uL2RvbWFpbi9FcnJvck1pZGRsZXdhcmUnO1xuaW1wb3J0IHsgUmVxdWVzdCB9IGZyb20gJy4uLy4uL2RvbWFpbi9odHRwL1JlcXVlc3QnO1xuaW1wb3J0IHsgUmVzcG9uc2UgfSBmcm9tICcuLi8uLi9kb21haW4vaHR0cC9SZXNwb25zZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBlcnNpc3RFcnJvck1pZGRsZXdhcmUgaW1wbGVtZW50cyBFcnJvck1pZGRsZXdhcmUge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHJlYWRvbmx5IGVycm9yVHJhY2tlcjogRXJyb3JUcmFja2VyLFxuICAgICkge31cblxuICAgIGFwcGx5KGVycm9yOiBFcnJvciwgcmVxOiBSZXF1ZXN0LCByZXM6IFJlc3BvbnNlLCBuZXh0OiBFcnJvck1pZGRsZXdhcmVOZXh0KTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLmVycm9yVHJhY2tlcikge1xuICAgICAgICAgICAgdGhpcy5lcnJvclRyYWNrZXIudHJhY2soVHJhY2tFcnJvci5mcm9tRXJyb3IoZXJyb3IpKTtcbiAgICAgICAgfVxuICAgICAgICBuZXh0KGVycm9yKTtcbiAgICB9XG59XG4iXSwidmVyc2lvbiI6M30=