{"file":"/Users/cuatroochenta/MagicShopper/magicshopper-node/src/microk/cqrs/infrastructure/command/InMemoryCommandBus.ts","mappings":";;;;;;;;;;;;;;;AAEA,qFAA6D;AAK7D,MAAa,kBAAkB;IAG3B,YACqB,qBAA+D,EAChF,YAA8C,EAAE;QAD/B,0BAAqB,GAArB,qBAAqB,CAA0C;QAGhF,IAAI,CAAC,QAAQ,GAAG,IAAI,kBAAQ,CAAgB,SAAS,CAAC,CAAC;IAC3D,CAAC;IAEK,QAAQ,CAAC,OAAgB;;YAC3B,OAAO,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,OAAO,EAAE,GAAS,EAAE;gBACzC,MAAM,OAAO,GAAG,IAAI,CAAC,qBAAqB,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;gBAC3D,MAAM,OAAO,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;YAClC,CAAC,CAAA,CAAC,CAAA;QACN,CAAC;KAAA;CACJ;AAhBD,gDAgBC","names":[],"sources":["/Users/cuatroochenta/MagicShopper/magicshopper-node/src/microk/cqrs/infrastructure/command/InMemoryCommandBus.ts"],"sourcesContent":["import { Mapper } from '../../../common/Mapper';\nimport WrapperExecutor from '../../../core/domain/WrapperExecutor';\nimport Executor from '../../../core/infrastructure/Executor';\nimport Command from '../../domain/command/Command';\nimport { CommandBus } from '../../domain/command/CommandBus';\nimport CommandHandler from '../../domain/command/CommandHandler';\n\nexport class InMemoryCommandBus implements CommandBus {\n    private readonly executor: Executor<Command, void>;\n\n    constructor(\n        private readonly commandHandlersMapper: Mapper<Command, CommandHandler<Command>>,\n        executors: WrapperExecutor<Command, void>[] = [],\n    ) {\n        this.executor = new Executor<Command, void>(executors);\n    }\n\n    async dispatch(command: Command): Promise<void> {\n        return this.executor.run(command, async () => {\n            const handler = this.commandHandlersMapper.search(command);\n            await handler.handle(command);\n        })\n    }\n}\n"],"version":3}