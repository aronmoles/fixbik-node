f3f1c9274f2610b1b74ed7952fe55e5c
"use strict";
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
Object.defineProperty(exports, "__esModule", { value: true });
class StoreMessageBusMiddleware {
    constructor(messageStore) {
        this.messageStore = messageStore;
    }
    run(message, next) {
        return __awaiter(this, void 0, void 0, function* () {
            const res = yield next();
            yield this.messageStore.store(message);
            return res;
        });
    }
}
exports.default = StoreMessageBusMiddleware;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2N1YXRyb29jaGVudGEvTWFnaWNTaG9wcGVyL21hZ2ljc2hvcHBlci1ub2RlL3NyYy9taWNyb2svbWVzc2FnZS1zdG9yZS9pbmZyYXN0cnVjdHVyZS9TdG9yZU1lc3NhZ2VCdXNNaWRkbGV3YXJlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBSUEsTUFBcUIseUJBQXlCO0lBQzFDLFlBQTZCLFlBQTBCO1FBQTFCLGlCQUFZLEdBQVosWUFBWSxDQUFjO0lBQUcsQ0FBQztJQUVyRCxHQUFHLENBQUMsT0FBZ0IsRUFBRSxJQUF3Qjs7WUFDaEQsTUFBTSxHQUFHLEdBQUcsTUFBTSxJQUFJLEVBQUUsQ0FBQztZQUN6QixNQUFNLElBQUksQ0FBQyxZQUFZLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBQ3ZDLE9BQU8sR0FBRyxDQUFDO1FBQ2YsQ0FBQztLQUFBO0NBQ0o7QUFSRCw0Q0FRQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMvY3VhdHJvb2NoZW50YS9NYWdpY1Nob3BwZXIvbWFnaWNzaG9wcGVyLW5vZGUvc3JjL21pY3Jvay9tZXNzYWdlLXN0b3JlL2luZnJhc3RydWN0dXJlL1N0b3JlTWVzc2FnZUJ1c01pZGRsZXdhcmUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IE1lc3NhZ2UgZnJvbSAnLi4vLi4vY29tbW9uL21lc3NhZ2UvTWVzc2FnZSc7XG5pbXBvcnQgV3JhcHBlckV4ZWN1dG9yIGZyb20gJy4uLy4uL2NvcmUvZG9tYWluL1dyYXBwZXJFeGVjdXRvcic7XG5pbXBvcnQgTWVzc2FnZVN0b3JlIGZyb20gJy4uL2RvbWFpbi9NZXNzYWdlU3RvcmUnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTdG9yZU1lc3NhZ2VCdXNNaWRkbGV3YXJlIGltcGxlbWVudHMgV3JhcHBlckV4ZWN1dG9yPE1lc3NhZ2UsIGFueT4ge1xuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgcmVhZG9ubHkgbWVzc2FnZVN0b3JlOiBNZXNzYWdlU3RvcmUpIHt9XG5cbiAgICBhc3luYyBydW4obWVzc2FnZTogTWVzc2FnZSwgbmV4dDogKCkgPT4gUHJvbWlzZTxhbnk+KTogUHJvbWlzZTxhbnk+IHtcbiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgbmV4dCgpO1xuICAgICAgICBhd2FpdCB0aGlzLm1lc3NhZ2VTdG9yZS5zdG9yZShtZXNzYWdlKTtcbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9XG59XG4iXSwidmVyc2lvbiI6M30=