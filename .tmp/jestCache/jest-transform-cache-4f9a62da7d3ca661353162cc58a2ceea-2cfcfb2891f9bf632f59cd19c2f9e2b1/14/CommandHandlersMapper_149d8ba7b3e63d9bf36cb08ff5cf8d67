4c912715b3e4eeba778200d51ee671a8
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.CommandHandlersMapper = void 0;
const CommandNotRegisteredError_1 = require("../../domain/command/CommandNotRegisteredError");
class CommandHandlersMapper {
    constructor(commandHandlers) {
        this.commandHandlersMap = this.formatHandlers(commandHandlers);
    }
    formatHandlers(commandHandlers) {
        const handlersMap = new Map();
        commandHandlers.forEach((commandHandler) => {
            handlersMap.set(commandHandler.subscribedTo(), commandHandler);
        });
        return handlersMap;
    }
    search(command) {
        const commandHandler = this.commandHandlersMap.get(command.constructor.name);
        if (!commandHandler) {
            throw new CommandNotRegisteredError_1.CommandNotRegisteredError(command);
        }
        return commandHandler;
    }
}
exports.CommandHandlersMapper = CommandHandlersMapper;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2N1YXRyb29jaGVudGEvTWFnaWNTaG9wcGVyL21hZ2ljc2hvcHBlci1ub2RlL3NyYy9taWNyb2svY3Fycy9pbmZyYXN0cnVjdHVyZS9jb21tYW5kL0NvbW1hbmRIYW5kbGVyc01hcHBlci50cyIsIm1hcHBpbmdzIjoiOzs7QUFHQSw4RkFBMkY7QUFFM0YsTUFBYSxxQkFBcUI7SUFHOUIsWUFBWSxlQUErQztRQUN2RCxJQUFJLENBQUMsa0JBQWtCLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxlQUFlLENBQUMsQ0FBQztJQUNuRSxDQUFDO0lBRU8sY0FBYyxDQUFDLGVBQStDO1FBQ2xFLE1BQU0sV0FBVyxHQUFHLElBQUksR0FBRyxFQUFFLENBQUM7UUFFOUIsZUFBZSxDQUFDLE9BQU8sQ0FBQyxDQUFDLGNBQWMsRUFBRSxFQUFFO1lBQ3ZDLFdBQVcsQ0FBQyxHQUFHLENBQUMsY0FBYyxDQUFDLFlBQVksRUFBRSxFQUFFLGNBQWMsQ0FBQyxDQUFDO1FBQ25FLENBQUMsQ0FBQyxDQUFDO1FBRUgsT0FBTyxXQUFXLENBQUM7SUFDdkIsQ0FBQztJQUVNLE1BQU0sQ0FBQyxPQUFnQjtRQUMxQixNQUFNLGNBQWMsR0FBRyxJQUFJLENBQUMsa0JBQWtCLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLENBQUM7UUFFN0UsSUFBSSxDQUFDLGNBQWMsRUFBRTtZQUNqQixNQUFNLElBQUkscURBQXlCLENBQUMsT0FBTyxDQUFDLENBQUM7U0FDaEQ7UUFFRCxPQUFPLGNBQWMsQ0FBQztJQUMxQixDQUFDO0NBQ0o7QUExQkQsc0RBMEJDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy9jdWF0cm9vY2hlbnRhL01hZ2ljU2hvcHBlci9tYWdpY3Nob3BwZXItbm9kZS9zcmMvbWljcm9rL2NxcnMvaW5mcmFzdHJ1Y3R1cmUvY29tbWFuZC9Db21tYW5kSGFuZGxlcnNNYXBwZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTWFwcGVyIH0gZnJvbSAnLi4vLi4vLi4vY29tbW9uL01hcHBlcic7XG5pbXBvcnQgQ29tbWFuZCBmcm9tICcuLi8uLi9kb21haW4vY29tbWFuZC9Db21tYW5kJztcbmltcG9ydCBDb21tYW5kSGFuZGxlciBmcm9tICcuLi8uLi9kb21haW4vY29tbWFuZC9Db21tYW5kSGFuZGxlcic7XG5pbXBvcnQgeyBDb21tYW5kTm90UmVnaXN0ZXJlZEVycm9yIH0gZnJvbSAnLi4vLi4vZG9tYWluL2NvbW1hbmQvQ29tbWFuZE5vdFJlZ2lzdGVyZWRFcnJvcic7XG5cbmV4cG9ydCBjbGFzcyBDb21tYW5kSGFuZGxlcnNNYXBwZXIgaW1wbGVtZW50cyBNYXBwZXI8Q29tbWFuZCwgQ29tbWFuZEhhbmRsZXI8Q29tbWFuZD4+IHtcbiAgICBwcml2YXRlIGNvbW1hbmRIYW5kbGVyc01hcDogTWFwPHN0cmluZywgQ29tbWFuZEhhbmRsZXI8Q29tbWFuZD4+O1xuXG4gICAgY29uc3RydWN0b3IoY29tbWFuZEhhbmRsZXJzOiBBcnJheTxDb21tYW5kSGFuZGxlcjxDb21tYW5kPj4pIHtcbiAgICAgICAgdGhpcy5jb21tYW5kSGFuZGxlcnNNYXAgPSB0aGlzLmZvcm1hdEhhbmRsZXJzKGNvbW1hbmRIYW5kbGVycyk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBmb3JtYXRIYW5kbGVycyhjb21tYW5kSGFuZGxlcnM6IEFycmF5PENvbW1hbmRIYW5kbGVyPENvbW1hbmQ+Pik6IE1hcDxzdHJpbmcsIENvbW1hbmRIYW5kbGVyPENvbW1hbmQ+PiB7XG4gICAgICAgIGNvbnN0IGhhbmRsZXJzTWFwID0gbmV3IE1hcCgpO1xuXG4gICAgICAgIGNvbW1hbmRIYW5kbGVycy5mb3JFYWNoKChjb21tYW5kSGFuZGxlcikgPT4ge1xuICAgICAgICAgICAgaGFuZGxlcnNNYXAuc2V0KGNvbW1hbmRIYW5kbGVyLnN1YnNjcmliZWRUbygpLCBjb21tYW5kSGFuZGxlcik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBoYW5kbGVyc01hcDtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2VhcmNoKGNvbW1hbmQ6IENvbW1hbmQpOiBDb21tYW5kSGFuZGxlcjxDb21tYW5kPiB7XG4gICAgICAgIGNvbnN0IGNvbW1hbmRIYW5kbGVyID0gdGhpcy5jb21tYW5kSGFuZGxlcnNNYXAuZ2V0KGNvbW1hbmQuY29uc3RydWN0b3IubmFtZSk7XG5cbiAgICAgICAgaWYgKCFjb21tYW5kSGFuZGxlcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IENvbW1hbmROb3RSZWdpc3RlcmVkRXJyb3IoY29tbWFuZCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gY29tbWFuZEhhbmRsZXI7XG4gICAgfVxufVxuIl0sInZlcnNpb24iOjN9