{"version":3,"sources":["/Users/cuatroochenta/MagicShopper/magicshopper-node/src/microk/tests/infrastructure/typeorm/TypeOrmEnvironmentFixtures.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAFA,MAAA,IAAA;AAAA;AAAA,0BAAA,OAAA,CAAA,IAAA,CAAA,CAAA;AAEA,MAAA,qBAAA;AAAA;AAAA,0BAAA,eAAA,CAAA,OAAA,CAAA,kCAAA,CAAA,CAAA,CAAA;;AAEA,MAAqB,0BAArB;AAAA;AAAA,CAAwD,qBAAA,CAAA,OAAxD,EAA2E;AACvE,EAAA,WAAA,CACqB,OADrB,EACiD;AAAA;AAAA;AAAA;AAE7C;;AAF6C;AAAA;AAA5B,SAAA,OAAA,GAAA,OAAA;AAGpB;;AAEK,EAAA,YAAY,GAAA;AAAA;AAAA;AAAA;;;;AACd,YAAM,YAAY;AAAA;AAAA,gCAAG,MAAM,KAAK,QAAL,EAAT,CAAlB;;;;;AACA,WAAK,MAAM,WAAX,IAA0B,YAA1B,EAAwC;AACpC,cAAM,OAAO;AAAA;AAAA,kCAAG,IAAI,CAAC,KAAL,CAAW,CAAA,GAAA,IAAA,CAAA,YAAA,EAAa,WAAb,EAA0B,MAA1B,CAAX,CAAH,CAAb;AACA,cAAM,UAAU;AAAA;AAAA,kCAAG,MAAM,CAAC,MAAM,KAAK,MAAL,EAAP,EAAsB,aAAtB,CAAoC,OAAO,CAAC,MAA5C,CAAT,CAAhB;;AAFoC;AAAA;AAGpC,cAAM,UAAU,CACX,kBADC,CACkB,OAAO,CAAC,MAD1B,EAED,MAFC,GAGD,MAHC,CAGM,OAAO,CAAC,IAHd,EAID,OAJC,EAAN;AAKH;AACJ,K;AAAA;;AAES,EAAA,MAAM,GAAA;AAAA;AAAA;AAAA;AACZ,WAAO,KAAK,OAAZ;AACH;;AAtBsE;;;;AAA3E,OAAA,CAAA,OAAA,GAAA,0BAAA","sourcesContent":["import { readFileSync } from 'fs';\nimport { Connection } from 'typeorm';\nimport EnvironmentFixtures from '../../domain/EnvironmentFixtures';\n\nexport default class TypeOrmEnvironmentFixtures extends EnvironmentFixtures {\n    constructor(\n        private readonly _client: Promise<Connection>\n    ) {\n        super();\n    }\n\n    async loadFixtures(): Promise<void> {\n        const fixtureFiles = await this.getFiles();\n        for (const fixtureFile of fixtureFiles) {\n            const fixture = JSON.parse(readFileSync(fixtureFile, 'utf8'));\n            const repository = await (await this.client()).getRepository(fixture.entity);\n            await repository\n                .createQueryBuilder(fixture.entity)\n                .insert()\n                .values(fixture.data)\n                .execute();\n        }\n    }\n\n    protected client(): Promise<Connection> {\n        return this._client;\n    }\n}\n"]}