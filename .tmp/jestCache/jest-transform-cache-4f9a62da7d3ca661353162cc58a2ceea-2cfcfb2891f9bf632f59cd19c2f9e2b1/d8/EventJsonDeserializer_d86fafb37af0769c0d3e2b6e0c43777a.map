{"file":"/Users/cuatroochenta/MagicShopper/magicshopper-node/src/microk/event/infrastructure/EventJsonDeserializer.ts","mappings":";;;AAKA,MAAa,qBAAqB;IAG9B,YAAY,OAAyB;QACjC,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;IAC3B,CAAC;IAED,WAAW,CAAC,WAAmB;QAC3B,MAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC;QACtC,MAAM,SAAS,GAAG,KAAK,CAAC,IAAI,CAAC;QAC7B,MAAM,SAAS,GAAG,KAAK,CAAC,IAAI,CAAC;QAC7B,MAAM,SAAS,GAAG,SAAS,CAAC,IAAI,CAAC;QACjC,MAAM,UAAU,GAAG,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;QAE/C,IAAI,CAAC,UAAU,EAAE;YACb,OAAO,SAAS,CAAC;SACpB;QAED,OAAO,UAAU,CAAC,cAAc,CAAC;YAC7B,EAAE,EAAE,SAAS,CAAC,EAAE;YAChB,IAAI,EAAE,SAAS,CAAC,IAAI;YACpB,IAAI,EAAE,SAAS,CAAC,IAAI;YACpB,WAAW,EAAE,SAAS,CAAC,WAAW;YAClC,UAAU,EAAE,SAAS,CAAC,UAAU;YAChC,SAAS;SACZ,CAAC,CAAC;IACP,CAAC;CACJ;AA3BD,sDA2BC","names":[],"sources":["/Users/cuatroochenta/MagicShopper/magicshopper-node/src/microk/event/infrastructure/EventJsonDeserializer.ts"],"sourcesContent":["import DomainEvent from '../domain/DomainEvent';\nimport EventDeserializer from '../domain/EventDeserializer';\nimport { EventClassMapper } from './EventClassMapper';\nimport { Optional } from '../../common/Optional';\n\nexport class EventJsonDeserializer implements EventDeserializer {\n    private mapping: EventClassMapper;\n\n    constructor(mapping: EventClassMapper) {\n        this.mapping = mapping;\n    }\n\n    deserialize(eventString: string): Optional<DomainEvent> {\n        const event = JSON.parse(eventString);\n        const eventData = event.data;\n        const eventMeta = event.meta;\n        const eventName = eventData.name;\n        const eventClass = this.mapping.for(eventName);\n\n        if (!eventClass) {\n            return undefined;\n        }\n\n        return eventClass.fromPrimitives({\n            id: eventData.id,\n            name: eventData.name,\n            type: eventData.type,\n            aggregateId: eventData.aggregateId,\n            occurredOn: eventData.occurredOn,\n            eventMeta,\n        });\n    }\n}\n"],"version":3}