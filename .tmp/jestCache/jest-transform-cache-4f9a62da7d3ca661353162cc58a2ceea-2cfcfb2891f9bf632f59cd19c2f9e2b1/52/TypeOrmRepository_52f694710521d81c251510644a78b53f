abf381755f49ce7928e3c24d6bad6d6f
"use strict";
var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.TypeOrmRepository = void 0;
class TypeOrmRepository {
    constructor(_client) {
        this._client = _client;
    }
    client() {
        return this._client;
    }
    repository() {
        return __awaiter(this, void 0, void 0, function* () {
            return (yield this._client).getRepository(this.entitySchema());
        });
    }
    persist(aggregateRoot) {
        return __awaiter(this, void 0, void 0, function* () {
            const repository = yield this.repository();
            yield repository.save(aggregateRoot);
        });
    }
}
exports.TypeOrmRepository = TypeOrmRepository;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2N1YXRyb29jaGVudGEvTWFnaWNTaG9wcGVyL21hZ2ljc2hvcHBlci1ub2RlL3NyYy9taWNyb2svcGVyc2lzdGVuY2UvaW5mcmFzdHJ1Y3R1cmUvdHlwZW9ybS9UeXBlT3JtUmVwb3NpdG9yeS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFHQSxNQUFzQixpQkFBaUI7SUFDbkMsWUFBb0IsT0FBNEI7UUFBNUIsWUFBTyxHQUFQLE9BQU8sQ0FBcUI7SUFDaEQsQ0FBQztJQUlTLE1BQU07UUFDWixPQUFPLElBQUksQ0FBQyxPQUFPLENBQUM7SUFDeEIsQ0FBQztJQUVlLFVBQVU7O1lBQ3RCLE9BQU8sQ0FBQyxNQUFNLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLFlBQVksRUFBRSxDQUFDLENBQUM7UUFDbkUsQ0FBQztLQUFBO0lBRWUsT0FBTyxDQUFDLGFBQWdCOztZQUNwQyxNQUFNLFVBQVUsR0FBRyxNQUFNLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQztZQUMzQyxNQUFNLFVBQVUsQ0FBQyxJQUFJLENBQUMsYUFBb0IsQ0FBQyxDQUFDO1FBQ2hELENBQUM7S0FBQTtDQUNKO0FBbEJELDhDQWtCQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMvY3VhdHJvb2NoZW50YS9NYWdpY1Nob3BwZXIvbWFnaWNzaG9wcGVyLW5vZGUvc3JjL21pY3Jvay9wZXJzaXN0ZW5jZS9pbmZyYXN0cnVjdHVyZS90eXBlb3JtL1R5cGVPcm1SZXBvc2l0b3J5LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbm5lY3Rpb24sIEVudGl0eVNjaGVtYSwgUmVwb3NpdG9yeSB9IGZyb20gJ3R5cGVvcm0nO1xuaW1wb3J0IHsgQWdncmVnYXRlUm9vdCB9IGZyb20gJy4uLy4uLy4uL2NvbW1vbi9BZ2dyZWdhdGVSb290JztcblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIFR5cGVPcm1SZXBvc2l0b3J5PFQgZXh0ZW5kcyBBZ2dyZWdhdGVSb290PiB7XG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBfY2xpZW50OiBQcm9taXNlPENvbm5lY3Rpb24+KSB7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGFic3RyYWN0IGVudGl0eVNjaGVtYSgpOiBFbnRpdHlTY2hlbWE8VD47XG5cbiAgICBwcm90ZWN0ZWQgY2xpZW50KCk6IFByb21pc2U8Q29ubmVjdGlvbj4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fY2xpZW50O1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBhc3luYyByZXBvc2l0b3J5KCk6IFByb21pc2U8UmVwb3NpdG9yeTxUPj4ge1xuICAgICAgICByZXR1cm4gKGF3YWl0IHRoaXMuX2NsaWVudCkuZ2V0UmVwb3NpdG9yeSh0aGlzLmVudGl0eVNjaGVtYSgpKTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgYXN5bmMgcGVyc2lzdChhZ2dyZWdhdGVSb290OiBUKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IHJlcG9zaXRvcnkgPSBhd2FpdCB0aGlzLnJlcG9zaXRvcnkoKTtcbiAgICAgICAgYXdhaXQgcmVwb3NpdG9yeS5zYXZlKGFnZ3JlZ2F0ZVJvb3QgYXMgYW55KTtcbiAgICB9XG59XG4iXSwidmVyc2lvbiI6M30=