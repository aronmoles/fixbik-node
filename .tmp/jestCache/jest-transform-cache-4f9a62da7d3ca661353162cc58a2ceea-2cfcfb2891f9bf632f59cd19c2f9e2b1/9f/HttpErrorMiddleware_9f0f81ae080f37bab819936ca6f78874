d0ef98ec29527b1eecf1fd4ce2c6d976
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const HttpError_1 = __importDefault(require("../../common/http/HttpError"));
const HttpStatus_1 = require("../../common/http/HttpStatus");
class HttpErrorMiddleware {
    constructor(logger) {
        this.logger = logger;
    }
    apply(error, req, res, next) {
        this.logger.error(`Error: ${error.message}`);
        const statusCode = error instanceof HttpError_1.default ? error.code : HttpStatus_1.HttpStatus.INTERNAL_SERVER_ERROR;
        res.status(statusCode).send({
            errors: {
                title: error.message,
            },
        });
        next(error);
    }
}
exports.default = HttpErrorMiddleware;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2N1YXRyb29jaGVudGEvTWFnaWNTaG9wcGVyL21hZ2ljc2hvcHBlci1ub2RlL3NyYy9taWNyb2svY29yZS9pbmZyYXN0cnVjdHVyZS9IdHRwRXJyb3JNaWRkbGV3YXJlLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsNEVBQW9EO0FBQ3BELDZEQUEwRDtBQU0xRCxNQUFxQixtQkFBbUI7SUFDcEMsWUFDcUIsTUFBYztRQUFkLFdBQU0sR0FBTixNQUFNLENBQVE7SUFDaEMsQ0FBQztJQUVKLEtBQUssQ0FBQyxLQUFZLEVBQUUsR0FBWSxFQUFFLEdBQWEsRUFBRSxJQUF5QjtRQUN0RSxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxVQUFVLEtBQUssQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDO1FBQzdDLE1BQU0sVUFBVSxHQUFHLEtBQUssWUFBWSxtQkFBUyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyx1QkFBVSxDQUFDLHFCQUFxQixDQUFDO1FBQzlGLEdBQUcsQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUMsSUFBSSxDQUFDO1lBQ3hCLE1BQU0sRUFBRTtnQkFDSixLQUFLLEVBQUUsS0FBSyxDQUFDLE9BQU87YUFDdkI7U0FDSixDQUFDLENBQUM7UUFDSCxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDaEIsQ0FBQztDQUNKO0FBZkQsc0NBZUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL2N1YXRyb29jaGVudGEvTWFnaWNTaG9wcGVyL21hZ2ljc2hvcHBlci1ub2RlL3NyYy9taWNyb2svY29yZS9pbmZyYXN0cnVjdHVyZS9IdHRwRXJyb3JNaWRkbGV3YXJlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBIdHRwRXJyb3IgZnJvbSAnLi4vLi4vY29tbW9uL2h0dHAvSHR0cEVycm9yJztcbmltcG9ydCB7IEh0dHBTdGF0dXMgfSBmcm9tICcuLi8uLi9jb21tb24vaHR0cC9IdHRwU3RhdHVzJztcbmltcG9ydCBMb2dnZXIgZnJvbSAnLi4vZG9tYWluL0xvZ2dlcic7XG5pbXBvcnQgeyBFcnJvck1pZGRsZXdhcmUsIEVycm9yTWlkZGxld2FyZU5leHQgfSBmcm9tICcuLi9kb21haW4vRXJyb3JNaWRkbGV3YXJlJztcbmltcG9ydCB7IFJlcXVlc3QgfSBmcm9tICcuLi9kb21haW4vaHR0cC9SZXF1ZXN0JztcbmltcG9ydCB7IFJlc3BvbnNlIH0gZnJvbSAnLi4vZG9tYWluL2h0dHAvUmVzcG9uc2UnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBIdHRwRXJyb3JNaWRkbGV3YXJlIGltcGxlbWVudHMgRXJyb3JNaWRkbGV3YXJlIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBsb2dnZXI6IExvZ2dlcixcbiAgICApIHt9XG5cbiAgICBhcHBseShlcnJvcjogRXJyb3IsIHJlcTogUmVxdWVzdCwgcmVzOiBSZXNwb25zZSwgbmV4dDogRXJyb3JNaWRkbGV3YXJlTmV4dCk6IHZvaWQge1xuICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcihgRXJyb3I6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICAgICAgY29uc3Qgc3RhdHVzQ29kZSA9IGVycm9yIGluc3RhbmNlb2YgSHR0cEVycm9yID8gZXJyb3IuY29kZSA6IEh0dHBTdGF0dXMuSU5URVJOQUxfU0VSVkVSX0VSUk9SO1xuICAgICAgICByZXMuc3RhdHVzKHN0YXR1c0NvZGUpLnNlbmQoe1xuICAgICAgICAgICAgZXJyb3JzOiB7XG4gICAgICAgICAgICAgICAgdGl0bGU6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgbmV4dChlcnJvcik7XG4gICAgfVxufVxuIl0sInZlcnNpb24iOjN9