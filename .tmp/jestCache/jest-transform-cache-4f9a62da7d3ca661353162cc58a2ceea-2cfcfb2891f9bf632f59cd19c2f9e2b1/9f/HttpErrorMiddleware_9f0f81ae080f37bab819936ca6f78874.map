{"file":"/Users/cuatroochenta/MagicShopper/magicshopper-node/src/microk/core/infrastructure/HttpErrorMiddleware.ts","mappings":";;;;;AAAA,4EAAoD;AACpD,6DAA0D;AAM1D,MAAqB,mBAAmB;IACpC,YACqB,MAAc;QAAd,WAAM,GAAN,MAAM,CAAQ;IAChC,CAAC;IAEJ,KAAK,CAAC,KAAY,EAAE,GAAY,EAAE,GAAa,EAAE,IAAyB;QACtE,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,UAAU,KAAK,CAAC,OAAO,EAAE,CAAC,CAAC;QAC7C,MAAM,UAAU,GAAG,KAAK,YAAY,mBAAS,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,uBAAU,CAAC,qBAAqB,CAAC;QAC9F,GAAG,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC;YACxB,MAAM,EAAE;gBACJ,KAAK,EAAE,KAAK,CAAC,OAAO;aACvB;SACJ,CAAC,CAAC;QACH,IAAI,CAAC,KAAK,CAAC,CAAC;IAChB,CAAC;CACJ;AAfD,sCAeC","names":[],"sources":["/Users/cuatroochenta/MagicShopper/magicshopper-node/src/microk/core/infrastructure/HttpErrorMiddleware.ts"],"sourcesContent":["import HttpError from '../../common/http/HttpError';\nimport { HttpStatus } from '../../common/http/HttpStatus';\nimport Logger from '../domain/Logger';\nimport { ErrorMiddleware, ErrorMiddlewareNext } from '../domain/ErrorMiddleware';\nimport { Request } from '../domain/http/Request';\nimport { Response } from '../domain/http/Response';\n\nexport default class HttpErrorMiddleware implements ErrorMiddleware {\n    constructor(\n        private readonly logger: Logger,\n    ) {}\n\n    apply(error: Error, req: Request, res: Response, next: ErrorMiddlewareNext): void {\n        this.logger.error(`Error: ${error.message}`);\n        const statusCode = error instanceof HttpError ? error.code : HttpStatus.INTERNAL_SERVER_ERROR;\n        res.status(statusCode).send({\n            errors: {\n                title: error.message,\n            },\n        });\n        next(error);\n    }\n}\n"],"version":3}