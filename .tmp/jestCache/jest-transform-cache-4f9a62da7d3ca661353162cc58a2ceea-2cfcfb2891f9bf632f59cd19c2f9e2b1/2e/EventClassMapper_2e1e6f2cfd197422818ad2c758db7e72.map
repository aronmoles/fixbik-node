{"file":"/Users/cuatroochenta/MagicShopper/magicshopper-node/src/microk/event/infrastructure/EventClassMapper.ts","mappings":";;;AAMA,MAAa,gBAAgB;IAGzB,YAAY,OAAuC;QAC/C,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,eAAe,EAAE,EAAE,IAAI,GAAG,EAA4B,CAAC,CAAC;IAC/F,CAAC;IAEO,eAAe;QACnB,OAAO,CAAC,GAAY,EAAE,UAAwC,EAAE,EAAE;YAC9D,UAAU,CAAC,YAAY,EAAE,CAAC,OAAO,CAAC,CAAC,gBAAgB,EAAE,EAAE;gBACnD,GAAG,CAAC,GAAG,CAAC,gBAAgB,CAAC,UAAU,CAAC,KAAK,EAAE,EAAE,gBAAgB,CAAC,CAAC;YACnE,CAAC,CAAC,CAAC;YACH,OAAO,GAAG,CAAC;QACf,CAAC,CAAC;IACN,CAAC;IAED,GAAG,CAAC,IAAY;QACZ,MAAM,WAAW,GAAG,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;QAE3C,IAAI,CAAC,WAAW,EAAE;YACd,OAAO,SAAS,CAAC;SACpB;QAED,OAAO,WAAW,CAAC;IACvB,CAAC;CACJ;AAzBD,4CAyBC","names":[],"sources":["/Users/cuatroochenta/MagicShopper/magicshopper-node/src/microk/event/infrastructure/EventClassMapper.ts"],"sourcesContent":["import { Optional } from '../../common/Optional';\nimport DomainEvent, { DomainEventClass } from '../domain/DomainEvent';\nimport EventSubscriber from '../domain/EventSubscriber';\n\ntype Mapping = Map<string, DomainEventClass>;\n\nexport class EventClassMapper {\n    private mapping: Mapping;\n\n    constructor(mapping: EventSubscriber<DomainEvent>[]) {\n        this.mapping = mapping.reduce(this.eventsExtractor(), new Map<string, DomainEventClass>());\n    }\n\n    private eventsExtractor() {\n        return (map: Mapping, subscriber: EventSubscriber<DomainEvent>) => {\n            subscriber.subscribedTo().forEach((domainEventClass) => {\n                map.set(domainEventClass.EVENT_NAME.value(), domainEventClass);\n            });\n            return map;\n        };\n    }\n\n    for(name: string): Optional<DomainEventClass> {\n        const domainEvent = this.mapping.get(name);\n\n        if (!domainEvent) {\n            return undefined;\n        }\n\n        return domainEvent;\n    }\n}\n"],"version":3}