5d13a0c673f1afa6b45289f00a7997cb
"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.AuthUser = void 0;
const AggregateRoot_1 = require("@microk/common/AggregateRoot");
const AuthUserIncorrectPasswordError_1 = __importDefault(require("./AuthUserIncorrectPasswordError"));
class AuthUser extends AggregateRoot_1.AggregateRoot {
    constructor(id, email, password, recoverPasswordToken) {
        super();
        this.id = id;
        this.email = email;
        this.password = password;
        this.recoverPasswordToken = recoverPasswordToken;
    }
    toPrimitives() {
        var _a;
        return {
            id: this.id.value(),
            email: this.email.value(),
            password: this.password.value(),
            recoverPasswordToken: (_a = this.recoverPasswordToken) === null || _a === void 0 ? void 0 : _a.value(),
        };
    }
    authenticate(password) {
        if (!this.password.equals(password)) {
            throw new AuthUserIncorrectPasswordError_1.default();
        }
    }
}
exports.AuthUser = AuthUser;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2N1YXRyb29jaGVudGEvTWFnaWNTaG9wcGVyL21hZ2ljc2hvcHBlci1ub2RlL3NyYy9tb2R1bGVzL2F1dGgvZG9tYWluL0F1dGhVc2VyLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLGdFQUE2RDtBQUs3RCxzR0FBOEU7QUFJOUUsTUFBYSxRQUFTLFNBQVEsNkJBQWE7SUFDdkMsWUFDYSxFQUFjLEVBQ2QsS0FBb0IsRUFDcEIsUUFBMEIsRUFDMUIsb0JBQTREO1FBRXJFLEtBQUssRUFBRSxDQUFDO1FBTEMsT0FBRSxHQUFGLEVBQUUsQ0FBWTtRQUNkLFVBQUssR0FBTCxLQUFLLENBQWU7UUFDcEIsYUFBUSxHQUFSLFFBQVEsQ0FBa0I7UUFDMUIseUJBQW9CLEdBQXBCLG9CQUFvQixDQUF3QztJQUd6RSxDQUFDO0lBRUQsWUFBWTs7UUFDUixPQUFPO1lBQ0gsRUFBRSxFQUFFLElBQUksQ0FBQyxFQUFFLENBQUMsS0FBSyxFQUFFO1lBQ25CLEtBQUssRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssRUFBRTtZQUN6QixRQUFRLEVBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLEVBQUU7WUFDL0Isb0JBQW9CLEVBQUUsTUFBQSxJQUFJLENBQUMsb0JBQW9CLDBDQUFFLEtBQUssRUFBRTtTQUMzRCxDQUFDO0lBQ04sQ0FBQztJQUVELFlBQVksQ0FBQyxRQUEwQjtRQUNuQyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLEVBQUU7WUFDakMsTUFBTSxJQUFJLHdDQUE4QixFQUFFLENBQUM7U0FDOUM7SUFDTCxDQUFDO0NBQ0o7QUF4QkQsNEJBd0JDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy9jdWF0cm9vY2hlbnRhL01hZ2ljU2hvcHBlci9tYWdpY3Nob3BwZXItbm9kZS9zcmMvbW9kdWxlcy9hdXRoL2RvbWFpbi9BdXRoVXNlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBZ2dyZWdhdGVSb290IH0gZnJvbSAnQG1pY3Jvay9jb21tb24vQWdncmVnYXRlUm9vdCc7XG5pbXBvcnQgeyBOdWxsYWJsZSB9IGZyb20gJ0BtaWNyb2svY29tbW9uL051bGxhYmxlJztcbmltcG9ydCB7IFByaW1pdGl2ZXNPYmplY3QgfSBmcm9tICdAbWljcm9rL2NvbW1vbi9QcmltaXRpdmVUeXBlJztcbmltcG9ydCBBdXRoVXNlckVtYWlsIGZyb20gJy4vQXV0aFVzZXJFbWFpbCc7XG5pbXBvcnQgQXV0aFVzZXJJZCBmcm9tICcuL0F1dGhVc2VySWQnO1xuaW1wb3J0IEF1dGhVc2VySW5jb3JyZWN0UGFzc3dvcmRFcnJvciBmcm9tICcuL0F1dGhVc2VySW5jb3JyZWN0UGFzc3dvcmRFcnJvcic7XG5pbXBvcnQgQXV0aFVzZXJQYXNzd29yZCBmcm9tICcuL0F1dGhVc2VyUGFzc3dvcmQnO1xuaW1wb3J0IEF1dGhVc2VyUmVjb3ZlclBhc3N3b3JkVG9rZW4gZnJvbSAnLi9BdXRoVXNlclJlY292ZXJQYXNzd29yZFRva2VuJztcblxuZXhwb3J0IGNsYXNzIEF1dGhVc2VyIGV4dGVuZHMgQWdncmVnYXRlUm9vdCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHJlYWRvbmx5IGlkOiBBdXRoVXNlcklkLFxuICAgICAgICByZWFkb25seSBlbWFpbDogQXV0aFVzZXJFbWFpbCxcbiAgICAgICAgcmVhZG9ubHkgcGFzc3dvcmQ6IEF1dGhVc2VyUGFzc3dvcmQsXG4gICAgICAgIHJlYWRvbmx5IHJlY292ZXJQYXNzd29yZFRva2VuOiBOdWxsYWJsZTxBdXRoVXNlclJlY292ZXJQYXNzd29yZFRva2VuPixcbiAgICApIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICB9XG5cbiAgICB0b1ByaW1pdGl2ZXMoKTogUHJpbWl0aXZlc09iamVjdCB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpZDogdGhpcy5pZC52YWx1ZSgpLFxuICAgICAgICAgICAgZW1haWw6IHRoaXMuZW1haWwudmFsdWUoKSxcbiAgICAgICAgICAgIHBhc3N3b3JkOiB0aGlzLnBhc3N3b3JkLnZhbHVlKCksXG4gICAgICAgICAgICByZWNvdmVyUGFzc3dvcmRUb2tlbjogdGhpcy5yZWNvdmVyUGFzc3dvcmRUb2tlbj8udmFsdWUoKSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBhdXRoZW50aWNhdGUocGFzc3dvcmQ6IEF1dGhVc2VyUGFzc3dvcmQpIHtcbiAgICAgICAgaWYgKCF0aGlzLnBhc3N3b3JkLmVxdWFscyhwYXNzd29yZCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBBdXRoVXNlckluY29ycmVjdFBhc3N3b3JkRXJyb3IoKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiJdLCJ2ZXJzaW9uIjozfQ==