e3cc92bb783f41be0d127515002f9cb7
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const QueryNotRegisteredError_1 = require("../../domain/query/QueryNotRegisteredError");
class QueryHandlersMapper {
    constructor(queryHandlers) {
        this.queryHandlersMap = this.formatHandlers(queryHandlers);
    }
    formatHandlers(queryHandlers) {
        const handlersMap = new Map();
        queryHandlers.forEach((queryHandler) => {
            handlersMap.set(queryHandler.subscribedTo(), queryHandler);
        });
        return handlersMap;
    }
    search(query) {
        const queryHandler = this.queryHandlersMap.get(query.constructor.name);
        if (!queryHandler) {
            throw new QueryNotRegisteredError_1.QueryNotRegisteredError(query);
        }
        return queryHandler;
    }
}
exports.default = QueryHandlersMapper;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2N1YXRyb29jaGVudGEvTWFnaWNTaG9wcGVyL21hZ2ljc2hvcHBlci1ub2RlL3NyYy9taWNyb2svY3Fycy9pbmZyYXN0cnVjdHVyZS9xdWVyeS9RdWVyeUhhbmRsZXJzTWFwcGVyLnRzIiwibWFwcGluZ3MiOiI7O0FBRUEsd0ZBQXFGO0FBR3JGLE1BQXFCLG1CQUFtQjtJQUdwQyxZQUFZLGFBQXdEO1FBQ2hFLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLGFBQWEsQ0FBQyxDQUFDO0lBQy9ELENBQUM7SUFFTyxjQUFjLENBQ2xCLGFBQXdEO1FBRXhELE1BQU0sV0FBVyxHQUFHLElBQUksR0FBRyxFQUFFLENBQUM7UUFFOUIsYUFBYSxDQUFDLE9BQU8sQ0FBQyxDQUFDLFlBQVksRUFBRSxFQUFFO1lBQ25DLFdBQVcsQ0FBQyxHQUFHLENBQUMsWUFBWSxDQUFDLFlBQVksRUFBRSxFQUFFLFlBQVksQ0FBQyxDQUFDO1FBQy9ELENBQUMsQ0FBQyxDQUFDO1FBRUgsT0FBTyxXQUFXLENBQUM7SUFDdkIsQ0FBQztJQUVNLE1BQU0sQ0FBQyxLQUFZO1FBQ3RCLE1BQU0sWUFBWSxHQUFHLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUV2RSxJQUFJLENBQUMsWUFBWSxFQUFFO1lBQ2YsTUFBTSxJQUFJLGlEQUF1QixDQUFDLEtBQUssQ0FBQyxDQUFDO1NBQzVDO1FBRUQsT0FBTyxZQUFZLENBQUM7SUFDeEIsQ0FBQztDQUNKO0FBNUJELHNDQTRCQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMvY3VhdHJvb2NoZW50YS9NYWdpY1Nob3BwZXIvbWFnaWNzaG9wcGVyLW5vZGUvc3JjL21pY3Jvay9jcXJzL2luZnJhc3RydWN0dXJlL3F1ZXJ5L1F1ZXJ5SGFuZGxlcnNNYXBwZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFF1ZXJ5IGZyb20gJy4uLy4uL2RvbWFpbi9xdWVyeS9RdWVyeSc7XG5pbXBvcnQgeyBRdWVyeUhhbmRsZXIgfSBmcm9tICcuLi8uLi9kb21haW4vcXVlcnkvUXVlcnlIYW5kbGVyJztcbmltcG9ydCB7IFF1ZXJ5Tm90UmVnaXN0ZXJlZEVycm9yIH0gZnJvbSAnLi4vLi4vZG9tYWluL3F1ZXJ5L1F1ZXJ5Tm90UmVnaXN0ZXJlZEVycm9yJztcbmltcG9ydCB7IFF1ZXJ5UmVzcG9uc2UgfSBmcm9tICcuLi8uLi9kb21haW4vcXVlcnkvUXVlcnlSZXNwb25zZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFF1ZXJ5SGFuZGxlcnNNYXBwZXIge1xuICAgIHByaXZhdGUgcXVlcnlIYW5kbGVyc01hcDogTWFwPHN0cmluZywgUXVlcnlIYW5kbGVyPFF1ZXJ5LCBRdWVyeVJlc3BvbnNlPj47XG5cbiAgICBjb25zdHJ1Y3RvcihxdWVyeUhhbmRsZXJzOiBBcnJheTxRdWVyeUhhbmRsZXI8UXVlcnksIFF1ZXJ5UmVzcG9uc2U+Pikge1xuICAgICAgICB0aGlzLnF1ZXJ5SGFuZGxlcnNNYXAgPSB0aGlzLmZvcm1hdEhhbmRsZXJzKHF1ZXJ5SGFuZGxlcnMpO1xuICAgIH1cblxuICAgIHByaXZhdGUgZm9ybWF0SGFuZGxlcnMoXG4gICAgICAgIHF1ZXJ5SGFuZGxlcnM6IEFycmF5PFF1ZXJ5SGFuZGxlcjxRdWVyeSwgUXVlcnlSZXNwb25zZT4+XG4gICAgKTogTWFwPHN0cmluZywgUXVlcnlIYW5kbGVyPFF1ZXJ5LCBRdWVyeVJlc3BvbnNlPj4ge1xuICAgICAgICBjb25zdCBoYW5kbGVyc01hcCA9IG5ldyBNYXAoKTtcblxuICAgICAgICBxdWVyeUhhbmRsZXJzLmZvckVhY2goKHF1ZXJ5SGFuZGxlcikgPT4ge1xuICAgICAgICAgICAgaGFuZGxlcnNNYXAuc2V0KHF1ZXJ5SGFuZGxlci5zdWJzY3JpYmVkVG8oKSwgcXVlcnlIYW5kbGVyKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIGhhbmRsZXJzTWFwO1xuICAgIH1cblxuICAgIHB1YmxpYyBzZWFyY2gocXVlcnk6IFF1ZXJ5KTogUXVlcnlIYW5kbGVyPFF1ZXJ5LCBRdWVyeVJlc3BvbnNlPiB7XG4gICAgICAgIGNvbnN0IHF1ZXJ5SGFuZGxlciA9IHRoaXMucXVlcnlIYW5kbGVyc01hcC5nZXQocXVlcnkuY29uc3RydWN0b3IubmFtZSk7XG5cbiAgICAgICAgaWYgKCFxdWVyeUhhbmRsZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBRdWVyeU5vdFJlZ2lzdGVyZWRFcnJvcihxdWVyeSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcXVlcnlIYW5kbGVyO1xuICAgIH1cbn1cbiJdLCJ2ZXJzaW9uIjozfQ==