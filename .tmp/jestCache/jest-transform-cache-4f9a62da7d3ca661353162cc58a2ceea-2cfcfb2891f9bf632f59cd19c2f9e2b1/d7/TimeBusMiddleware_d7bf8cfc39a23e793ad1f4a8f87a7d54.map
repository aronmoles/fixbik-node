{"file":"/Users/cuatroochenta/MagicShopper/magicshopper-node/src/microk/utils/TimeBusMiddleware.ts","mappings":";;;;;;;;;;;;;;AAAA,gFAAwD;AAKxD,MAAqB,iBAAiB;IAClC,YAA6B,MAAc;QAAd,WAAM,GAAN,MAAM,CAAQ;IAAG,CAAC;IAEzC,GAAG,CAAC,OAAgB,EAAE,IAAwB;;YAChD,MAAM,cAAc,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC;YAClC,MAAM,GAAG,GAAG,MAAM,IAAI,EAAE,CAAC;YACzB,MAAM,YAAY,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC;YAEhC,MAAM,IAAI,GAAG,YAAY,GAAG,cAAc,CAAC;YAC3C,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,qBAAW,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;YAC9C,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,OAAO,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,YAAY,GAAG,cAAc,IAAI,CAAC,CAAC;YAE/E,OAAO,GAAG,CAAC;QACf,CAAC;KAAA;CACJ;AAdD,oCAcC","names":[],"sources":["/Users/cuatroochenta/MagicShopper/magicshopper-node/src/microk/utils/TimeBusMiddleware.ts"],"sourcesContent":["import MessageMeta from '../common/message/MessageMeta';\nimport WrapperExecutor from '../core/domain/WrapperExecutor';\nimport Logger from '../core/domain/Logger';\nimport Message from '../common/message/Message';\n\nexport default class TimeBusMiddleware implements WrapperExecutor<Message, any> {\n    constructor(private readonly logger: Logger) {}\n\n    async run(message: Message, next: () => Promise<any>): Promise<any> {\n        const startTimestamp = Date.now();\n        const res = await next();\n        const endTimestamp = Date.now();\n\n        const time = endTimestamp - startTimestamp;\n        message.meta.set(MessageMeta.KEYS.TIME, time);\n        this.logger.info(`${message.name.value()} ${endTimestamp - startTimestamp}ms`);\n\n        return res;\n    }\n}\n"],"version":3}